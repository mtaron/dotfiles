{{- $isGnome := lookPath "gnome-shell" | not | not -}}
{{- $isX := lookPath "xhost" | not | not -}}

{{- $headless := true -}}

{{- if or $isGnome $isX -}}
{{-   $headless = false -}}
{{- else if stdinIsATTY -}}
{{-   $headless = promptBoolOnce . "headless" "headless" false -}}
{{- end -}}

{{- $email := default "michael@taron.dev" (env "GIT_AUTHOR_EMAIL") -}}
{{- if stdinIsATTY -}}
{{    $email = promptStringOnce . "user.email" "email" $email }}
{{- end -}}

data:
  headless: {{ $headless }}
  isGnome: {{ $isGnome }}

  user:
    name: "Michael Taron"
    email: {{ $email | quote }}
    github: "mtaron"

